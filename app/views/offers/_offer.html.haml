%tr.proposal
  %td
    .user
      = link_to image_tag(offer.user.picture("square")), offer.user
  %td
    .row
      .col-sm-9
        %h3
          = link_to(offer.title, offer)
      .col-sm-3
        .proposal-btn
          - if current_user && current_user != offer.user
            .btn.btn-danger.btn-small.request-btn
              <i class="fa fa-envelope"></i> Request
          - elsif current_user == offer.user
            = link_to offer, method: :delete, class: "btn btn-danger btn-small",
                                confirm: "Are you sure you want to delete this offer?" do
              <i class="fa fa-times"></i>
            = link_to edit_offer_path(offer), class: "btn btn-primary btn-small" do
              <i class="fa fa-pencil"></i>
          - else
            = link_to signin_path, class: "btn btn-danger btn-small" do
              <i class="fa fa-envelope"></i> Sign in to request

    = markdown(offer.description)
    .request{ class: "hidden" }
      = render partial: "messages/form", locals: {offer: offer}
  %td
    .info
      - unless offer.location == "Anywhere"
        .location
          <i class="fa fa-map-marker"></i>
          = offer.location
  %td
    .info
      .category
        - category = offer.category_list.first
        = raw(category_tag(category))
        = link_to category, offers_path(category: category)
